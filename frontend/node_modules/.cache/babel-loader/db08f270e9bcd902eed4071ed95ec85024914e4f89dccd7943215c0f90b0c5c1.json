{"ast":null,"code":"import React from'react';import{Routes,Route,Navigate}from'react-router-dom';import{useAuth}from'./contexts/AuthContext';import Layout from'./components/Layout';import Dashboard from'./pages/Dashboard';import Blockchain from'./pages/Blockchain';import Suppliers from'./pages/Suppliers';import Orders from'./pages/Orders';import OrderDetail from'./pages/OrderDetail';import Inventory from'./pages/Inventory';import Users from'./pages/Users';import Settings from'./pages/Settings';import Login from'./pages/Login';import ItemManagement from'./pages/ItemManagement';import LoadingSpinner from'./components/LoadingSpinner';import'./App.css';// Protected Route Component\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const{isAuthenticated,loading}=useAuth();console.log('üõ°Ô∏è ProtectedRoute render - isAuthenticated:',isAuthenticated,'loading:',loading);if(loading){console.log('‚è≥ ProtectedRoute loading, showing spinner');return/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\",text:\"Loading...\"});}if(!isAuthenticated){console.log('‚ùå ProtectedRoute: User not authenticated, redirecting to /login');return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}console.log('‚úÖ ProtectedRoute: User authenticated, rendering children');return/*#__PURE__*/_jsx(_Fragment,{children:children});};// Admin Route Component\nconst AdminRoute=_ref2=>{let{children}=_ref2;const{isAuthenticated,loading,user}=useAuth();if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\",text:\"Loading...\"});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}if(!(user!==null&&user!==void 0&&user.is_admin)){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}return/*#__PURE__*/_jsx(_Fragment,{children:children});};function App(){const{isAuthenticated,loading}=useAuth();console.log('üè† App component render - isAuthenticated:',isAuthenticated,'loading:',loading);if(loading){console.log('‚è≥ App is loading, showing spinner');return/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\",text:\"Loading application...\"});}console.log('‚úÖ App loaded, isAuthenticated:',isAuthenticated);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isAuthenticated?(()=>{console.log('üîÑ User is authenticated, redirecting from /login to /dashboard');return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});})():(()=>{console.log('üìù User not authenticated, showing Login component');return/*#__PURE__*/_jsx(Login,{});})()}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Dashboard,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Dashboard,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/blockchain\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Blockchain,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/suppliers\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Suppliers,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/orders\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Orders,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/orders/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(OrderDetail,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/inventory\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Inventory,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/users\",element:/*#__PURE__*/_jsx(AdminRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Users,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(AdminRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Settings,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/item-management\",element:/*#__PURE__*/_jsx(AdminRoute,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(ItemManagement,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})})})]})});}export default App;","map":{"version":3,"names":["React","Routes","Route","Navigate","useAuth","Layout","Dashboard","Blockchain","Suppliers","Orders","OrderDetail","Inventory","Users","Settings","Login","ItemManagement","LoadingSpinner","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ProtectedRoute","_ref","children","isAuthenticated","loading","console","log","size","text","to","replace","AdminRoute","_ref2","user","is_admin","App","className","path","element"],"sources":["F:/Project/BLOCKCHAIN/frontend/src/App.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport { useAuth } from './contexts/AuthContext';\r\nimport Layout from './components/Layout';\r\nimport Dashboard from './pages/Dashboard';\r\nimport Blockchain from './pages/Blockchain';\r\nimport Suppliers from './pages/Suppliers';\r\nimport Orders from './pages/Orders';\r\nimport OrderDetail from './pages/OrderDetail';\r\nimport Inventory from './pages/Inventory';\r\nimport Users from './pages/Users';\r\nimport Settings from './pages/Settings';\r\nimport Login from './pages/Login';\r\nimport ItemManagement from './pages/ItemManagement';\r\nimport LoadingSpinner from './components/LoadingSpinner';\r\nimport './App.css';\r\n\r\n// Protected Route Component\r\nconst ProtectedRoute: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const { isAuthenticated, loading } = useAuth();\r\n\r\n  console.log('üõ°Ô∏è ProtectedRoute render - isAuthenticated:', isAuthenticated, 'loading:', loading);\r\n\r\n  if (loading) {\r\n    console.log('‚è≥ ProtectedRoute loading, showing spinner');\r\n    return <LoadingSpinner size=\"lg\" text=\"Loading...\" />;\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    console.log('‚ùå ProtectedRoute: User not authenticated, redirecting to /login');\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  console.log('‚úÖ ProtectedRoute: User authenticated, rendering children');\r\n  return <>{children}</>;\r\n};\r\n\r\n// Admin Route Component\r\nconst AdminRoute: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const { isAuthenticated, loading, user } = useAuth();\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner size=\"lg\" text=\"Loading...\" />;\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  if (!user?.is_admin) {\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  return <>{children}</>;\r\n};\r\n\r\nfunction App() {\r\n  const { isAuthenticated, loading } = useAuth();\r\n\r\n  console.log('üè† App component render - isAuthenticated:', isAuthenticated, 'loading:', loading);\r\n\r\n  if (loading) {\r\n    console.log('‚è≥ App is loading, showing spinner');\r\n    return <LoadingSpinner size=\"lg\" text=\"Loading application...\" />;\r\n  }\r\n\r\n  console.log('‚úÖ App loaded, isAuthenticated:', isAuthenticated);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Routes>\r\n        {/* Public Routes */}\r\n        <Route \r\n          path=\"/login\" \r\n          element={\r\n            isAuthenticated ? (\r\n              (() => {\r\n                console.log('üîÑ User is authenticated, redirecting from /login to /dashboard');\r\n                return <Navigate to=\"/dashboard\" replace />;\r\n              })()\r\n            ) : (\r\n              (() => {\r\n                console.log('üìù User not authenticated, showing Login component');\r\n                return <Login />;\r\n              })()\r\n            )\r\n          } \r\n        />\r\n\r\n        {/* Protected Routes */}\r\n        <Route\r\n          path=\"/\"\r\n          element={\r\n            <ProtectedRoute>\r\n              <Layout>\r\n                <Dashboard />\r\n              </Layout>\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/dashboard\"\r\n          element={\r\n            <ProtectedRoute>\r\n              <Layout>\r\n                <Dashboard />\r\n              </Layout>\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/blockchain\"\r\n          element={\r\n            <ProtectedRoute>\r\n              <Layout>\r\n                <Blockchain />\r\n              </Layout>\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/suppliers\"\r\n          element={\r\n            <ProtectedRoute>\r\n              <Layout>\r\n                <Suppliers />\r\n              </Layout>\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/orders\"\r\n          element={\r\n            <ProtectedRoute>\r\n              <Layout>\r\n                <Orders />\r\n              </Layout>\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/orders/:id\"\r\n          element={\r\n            <ProtectedRoute>\r\n              <Layout>\r\n                <OrderDetail />\r\n              </Layout>\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/inventory\"\r\n          element={\r\n            <ProtectedRoute>\r\n              <Layout>\r\n                <Inventory />\r\n              </Layout>\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n\r\n        {/* Admin-Only Routes */}\r\n        <Route\r\n          path=\"/users\"\r\n          element={\r\n            <AdminRoute>\r\n              <Layout>\r\n                <Users />\r\n              </Layout>\r\n            </AdminRoute>\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/settings\"\r\n          element={\r\n            <AdminRoute>\r\n              <Layout>\r\n                <Settings />\r\n              </Layout>\r\n            </AdminRoute>\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/item-management\"\r\n          element={\r\n            <AdminRoute>\r\n              <Layout>\r\n                <ItemManagement />\r\n              </Layout>\r\n            </AdminRoute>\r\n          }\r\n        />\r\n\r\n        {/* Catch-all route */}\r\n        <Route\r\n          path=\"*\"\r\n          element={\r\n            <ProtectedRoute>\r\n              <Navigate to=\"/dashboard\" replace />\r\n            </ProtectedRoute>\r\n          }\r\n        />\r\n      </Routes>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}